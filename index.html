<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <base target="_blank">
    <title>Bookmark</title>
    <style>
    body {
      margin: 50px;
      background-color: #ddd;
      font-family: sans-serif, sans;
    }
    a {
      text-decoration: none;
    }
    img {
      margin-right: 6px;
    }
    ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }
    ul li {
      padding: 10px;
      margin: 10px;
      background-color: #f7f6fc;
      border-radius: 6px;
    }
    ul li:hover {
      background-color: #eeeee0;
    }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-17KLP7Q2R8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-17KLP7Q2R8');
    </script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WN5BVP5P');</script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WN5BVP5P"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <h1>ðŸ”— Bookmark</h1>
    <hr>
    <br>
    <br>
    <script src="data.js"></script>
    <script type="text/javascript">
    const icon = "https://t2.gstatic.com/faviconV2?client=SOCIAL&type=" +
                 "FAVICON&fallback_opts=TYPE,SIZE,URL&url=";
    function include(file, callback) {
        fetch(file)
        .then(res => {
            if (!res.ok) {
                throw new Error(`HTTP error! Status: ${res.status}`);
            }
            return res.json();
        })
        .then(data => callback(null, data))
        .catch(error => callback(error, null));
    }
    function normalize(str) {
        return str.normalize("NFD")
                  .replace(/[^a-zA-Z0-9\s]/g, "")
                  .toLowerCase()
                  .replace(/\s/g, "-");
    }
    function dom(title) {
        var h2   = document.createElement("h2");
        var text = document.createTextNode(title);
        var ul   = document.createElement("ul");
        ul.id    = normalize(title);
        h2.appendChild(text);
        document.body.appendChild(h2);
        document.body.appendChild(ul);
    }
    function bookmark(title, link) {
        dom(title);
        Object.keys(link).forEach(href => {
            let a   = document.createElement("a");
            let ul  = document.getElementById(normalize(title));
            let li  = document.createElement("li");
            let img = document.createElement("img");
            a.textContent = href;
            a.setAttribute("href", link[href]);
            img.setAttribute("src", icon + link[href] + "&size=16");
            li.appendChild(img);
            li.appendChild(a);
            ul.appendChild(li);
        });
    }
    include("https://leandro-sciola.github.io/Bookmark/data.json",
    (error, data) => {
        if (data) {
            Object.keys(data).forEach(function (title) {
                bookmark(title, data[title]);
            });
        }
    });
    </script>
  </body>
</html>
